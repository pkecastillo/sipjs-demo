(function(e){function o(o){for(var n,a,r=o[0],c=o[1],l=o[2],u=0,g=[];u<r.length;u++)a=r[u],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&g.push(s[a][0]),s[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);f&&f(o);while(g.length)g.shift()();return i.push.apply(i,l||[]),t()}function t(){for(var e,o=0;o<i.length;o++){for(var t=i[o],n=!0,a=1;a<t.length;a++){var c=t[a];0!==s[c]&&(n=!1)}n&&(i.splice(o--,1),e=r(r.s=t[0]))}return e}var n={},s={app:0},i=[];function a(e){return r.p+"js/"+({about:"about"}[e]||e)+"."+{about:"69262a8b"}[e]+".js"}function r(o){if(n[o])return n[o].exports;var t=n[o]={i:o,l:!1,exports:{}};return e[o].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.e=function(e){var o=[],t=s[e];if(0!==t)if(t)o.push(t[2]);else{var n=new Promise((function(o,n){t=s[e]=[o,n]}));o.push(t[2]=n);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=a(e);var l=new Error;i=function(o){c.onerror=c.onload=null,clearTimeout(u);var t=s[e];if(0!==t){if(t){var n=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",l.name="ChunkLoadError",l.type=n,l.request=i,t[1](l)}s[e]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(o)},r.m=e,r.c=n,r.d=function(e,o,t){r.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:t})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,o){if(1&o&&(e=r(e)),8&o)return e;if(4&o&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var n in e)r.d(t,n,function(o){return e[o]}.bind(null,n));return t},r.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(o,"a",o),o},r.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},r.p="/sipjs-demo/",r.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=o,c=c.slice();for(var u=0;u<c.length;u++)o(c[u]);var f=l;i.push([0,"chunk-vendors"]),t()})({0:function(e,o,t){e.exports=t("cd49")},1737:function(e,o,t){},3090:function(e,o,t){},"5c0b":function(e,o,t){"use strict";var n=t("9c0c"),s=t.n(n);s.a},7623:function(e,o,t){"use strict";var n=t("1737"),s=t.n(n);s.a},"79b0":function(e,o,t){"use strict";var n=t("3090"),s=t.n(n);s.a},"9c0c":function(e,o,t){},c69f:function(e,o,t){},cd49:function(e,o,t){"use strict";t.r(o);t("e260"),t("e6cf"),t("cca6"),t("a79d");var n=t("2b0e"),s=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{attrs:{id:"app"}},[t("div",{attrs:{id:"nav"}},[t("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v(" | "),t("router-link",{attrs:{to:"/voice"}},[e._v("Voice")]),e._v(" | "),t("router-link",{attrs:{to:"/about"}},[e._v("About")])],1),t("router-view")],1)},i=[],a=(t("5c0b"),t("2877")),r={},c=Object(a["a"])(r,s,i,!1,null,null,null),l=c.exports,u=(t("d3b7"),t("8c4f")),f=function(){var e=this,o=e.$createElement,n=e._self._c||o;return n("div",{staticClass:"home"},[n("img",{attrs:{alt:"Vue logo",src:t("cf05")}}),n("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},g=[],d=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"hello"},[t("h1",[e._v(e._s(e.msg))]),e._m(0)])},h=[function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("p",[e._v(" For a guide and recipes on how to configure / customize this project,"),t("br"),e._v(" check out the "),t("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-cli documentation")]),e._v(". ")])}],p=t("d4ec"),m=t("99de"),v=t("7e84"),b=t("262e"),w=t("9ab4"),_=t("60a3"),O=function(e){function o(){return Object(p["a"])(this,o),Object(m["a"])(this,Object(v["a"])(o).apply(this,arguments))}return Object(b["a"])(o,e),o}(_["c"]);w["__decorate"]([Object(_["b"])()],O.prototype,"msg",void 0),O=w["__decorate"]([_["a"]],O);var j=O,k=j,y=(t("7623"),Object(a["a"])(k,d,h,!1,null,"543b547a",null)),C=y.exports,$={name:"home",components:{HelloWorld:C}},I=$,A=Object(a["a"])(I,f,g,!1,null,null,null),D=A.exports,x=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[e.loginInfo.showLoginArea?t("div",{attrs:{id:"login"}},[t("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.loginInfo.account,callback:function(o){e.$set(e.loginInfo,"account",o)},expression:"loginInfo.account"}}),t("el-input",{attrs:{placeholder:"请输入密码"},model:{value:e.loginInfo.password,callback:function(o){e.$set(e.loginInfo,"password",o)},expression:"loginInfo.password"}}),t("el-button",{attrs:{id:"loginBtn"},on:{click:e.login}},[e._v("登录")])],1):e._e(),e.loginInfo.showLoginArea?e._e():t("div",{attrs:{id:"funcBtns"}},[t("el-button",{on:{click:e.online}},[e._v("签入")]),t("el-button",{on:{click:e.offline}},[e._v("签出")]),t("el-button",{on:{click:e.logout}},[e._v("登出")]),t("hr"),t("el-input",{attrs:{placeholder:"请输入要呼叫的号码"},model:{value:e.remoteNumber,callback:function(o){e.remoteNumber=o},expression:"remoteNumber"}}),t("el-button",{on:{click:e.call}},[e._v("拨号")]),t("el-dialog",{attrs:{center:"",visible:e.showOutgoingCallDialog,width:"30%"},on:{"update:visible":function(o){e.showOutgoingCallDialog=o}}},[t("span",[e._v("正在呼叫 "+e._s(e.remoteNumber))]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelCall}},[e._v("取消")])],1)]),t("el-dialog",{attrs:{center:"",visible:e.showIncomingCallDialog,width:"30%"},on:{"update:visible":function(o){e.showIncomingCallDialog=o}}},[t("span",[e._v(e._s(e.remoteNumber)+" 来话")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.accept}},[e._v("接受")]),t("el-button",{on:{click:e.reject}},[e._v("拒绝")])],1)])],1),t("div",{attrs:{id:"video"}},[t("audio",{ref:"localAudio",attrs:{autoplay:"",muted:""}}),t("audio",{ref:"remoteAudio",attrs:{autoplay:""}}),t("el-button",{attrs:{id:"endCallBtn"},on:{click:e.endCall}},[e._v("挂断")])],1)])},S=[],E=(t("99af"),t("4160"),t("159b"),t("2ac9")),P="192.168.160.46",T="ws://192.168.160.46:5066";P="182.61.24.127",T="wss://sip.xiaosongfu.com:7443";var M={name:"sip",data:function(){return{loginInfo:{showLoginArea:!0,account:"1010",password:"2345"},ua:null,session:null,remoteNumber:"1011",showOutgoingCallDialog:!1,showIncomingCallDialog:!1}},methods:{login:function(){var e=this,o={uri:"".concat(this.loginInfo.account,"@").concat(P),transportOptions:{wsServers:T,traceSip:!0},authorizationUser:this.loginInfo.account,password:this.loginInfo.password,register:!1};this.ua=new E["UA"](o),this.ua.start(),this.ua.on("registered",(function(){e.$message.success("上线成功")})),this.ua.on("registrationFailed",(function(o,t){e.$message.error("注册失败: ".concat(o)),console.error("注册失败, response: ".concat(o,", cause: ").concat(t))})),this.ua.on("unregistered",(function(o,t){e.$message.success("下线成功"),console.log("下线成功, response: ".concat(o,", cause: ").concat(t))})),this.ua.on("invite",(function(o){console.log(o),e.session=o,e.showIncomingCallDialog=!0})),this.loginInfo.showLoginArea=!1,console.log("login...")},logout:function(){this.ua.stop(),this.loginInfo.showLoginArea=!0,console.log("logout...")},online:function(){this.ua.register(),console.log("online...")},offline:function(){this.ua.unregister(),console.log("offline...")},call:function(){var e=this;if(this.ua.isRegistered()){if(!this.remoteNumber)return void this.$message.warning("请输入要呼叫的号码");this.session=this.ua.invite("".concat(this.remoteNumber,"@").concat(P),{sessionDescriptionHandlerOptions:{constraints:{audio:!0,video:!1}}}),this.showOutgoingCallDialog=!0,this.session.on("accepted",(function(o){e.$message.success("对方已接受"),console.log("对方已接受: ".concat(o)),e.showOutgoingCallDialog=!1})),this.session.on("rejected",(function(o,t){e.$message.info("对方已拒绝"),console.log("对方已拒绝, response: ".concat(o,", cause=").concat(t)),e.showOutgoingCallDialog=!1})),this.session.on("failed",(function(o,t){e.$message.error("呼叫失败"),console.log("呼叫失败, response: ".concat(o,", cause=").concat(t)),e.showOutgoingCallDialog=!1})),this.session.on("bye",(function(o){e.$message.info("通话已结束"),console.log("通话已结束: ".concat(o))})),this.session.on("terminate",(function(o,t){e.$message.info("通话已结束"),console.log("通话已结束,message : ".concat(o,", cause=").concat(t))})),this.session.on("trackAdded",(function(){var o=e.session.sessionDescriptionHandler.peerConnection,t=new MediaStream;o.getReceivers().forEach((function(e){t.addTrack(e.track)})),e.$refs.remoteAudio.srcObject=t;var n=new MediaStream;o.getSenders().forEach((function(e){n.addTrack(e.track)})),e.$refs.localAudio.srcObject=n})),console.log("invite...")}else this.$message.warning("请先签入")},cancelCall:function(){this.session.cancel(),this.$message.info("通话已取消"),this.showOutgoingCallDialog=!1,console.log("cancel...")},endCall:function(){this.session&&(this.session.terminate(),this.$message.info("通话已结束"),console.log("terminate..."))},accept:function(){var e=this;this.session.accept(),this.$message.info("呼叫已接受"),this.showIncomingCallDialog=!1,this.session.on("trackAdded",(function(){var o=e.session.sessionDescriptionHandler.peerConnection,t=new MediaStream;o.getReceivers().forEach((function(e){console.log(e),t.addTrack(e.track)})),e.$refs.remoteAudio.srcObject=t;var n=new MediaStream;o.getSenders().forEach((function(e){n.addTrack(e.track)})),e.$refs.localAudio.srcObject=n})),this.session.on("bye",(function(o){e.$message.info("通话已结束"),console.log("通话已结束: ".concat(o))}))},reject:function(){this.session.reject(),this.$message.info("呼叫已拒绝"),this.showIncomingCallDialog=!1}}},N=M,L=(t("79b0"),Object(a["a"])(N,x,S,!1,null,null,null)),H=L.exports;n["default"].use(u["a"]);var B=[{path:"/",name:"home",component:D},{path:"/about",name:"about",component:function(){return t.e("about").then(t.bind(null,"f820"))}},{path:"/voice",name:"voice",component:H}],R=new u["a"]({routes:B}),V=R,W=t("2f62");n["default"].use(W["a"]);var z=new W["a"].Store({state:{},mutations:{},actions:{},modules:{}}),F=t("5c96"),J=t.n(F);t("c69f");n["default"].use(J.a),n["default"].config.productionTip=!1,new n["default"]({router:V,store:z,render:function(e){return e(l)}}).$mount("#app")},cf05:function(e,o,t){e.exports=t.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.e5a4f577.js.map